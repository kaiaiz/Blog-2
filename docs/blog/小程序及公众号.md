# 公众号及小程序

## 公众号

## 小程序

### button 组件

#### 默认样式更改及点击样式更改

按钮的默认样式会有边框，如果项目中不需要默认边框，可以在全局样式 app.wxss 中加上，也可以局部设置

```css
/* 全局 button */
button::after {
  border: 0;
}

/* 局部 */
.test button::after {
  border: 0;
}
```

通过**属性选择器**来自定义禁用后的样式

```css
.other[disabled] {
  background: linear-gradient(
    to right,
    rgba(16, 103, 233, 0.8),
    rgba(16, 142, 233, 0.6)
  );
  box-shadow: 0 1rpx 6rpx 2rpx rgba(16, 103, 233, 0.7);
  color: rgba(0, 0, 0, 0.2);
}
```

#### 自定义按钮点击时的样式

::: warning 注意！
如果设置了按钮的 type 属性，如 `type="primary"` ,则无法自定义成功，必须删除 `type` 属性，`hover-class` 的类名默认值为 `button-hover`
:::

```html
<!-- 自定义点击样式类 -->
<button hover-class="other-button-hover">primary</button>
```

```css
/** 修改 button 默认的点击态样式类**/
.button-hover {
  background-color: red;
}

/** 添加自定义 button 点击态样式类**/
.other-button-hover {
  background-color: blue;
}
```

### web-view 组件的坑

在修改 `web-view` 显示渲染状态的时候，不能使用 `this.setData({})` 来加锁 ，也不能使用 `wx.setStorageSync()` 加锁，最后是设置全局变量 `app.globalData` 实现的

### 页面传递对象

1. 先将要传的对象通过 `JSON.stringify` 转译为字符串后拼接到 `URL` 上

```js
const details = JSON.stringify(e.currentTarget.dataset.details)
const dataType = this.properties.dataType

wx.navigateTo({
  url: `/pages/my/repairDetails/index?dataType=${dataType}&details=${details}`
})
```

2. 到跳转的页面上接收转译的对象变量

```js
onLoad: function(options) {
  let details = JSON.parse(options.details)
  console.log('details', details)
  var stringTime = details.effectiveEndTime
  let effectiveEndTime = transformationDate(stringTime, 1)
  this.setData({
    details,
    effectiveEndTime,
    monthAmount: details.monthAmount
  })
}
```
